# 题目解析

> **题目名称**：2048_easy ，2048_brain_hole
>
> **题目内容**：1. 小火汁，听说你打游戏超厉害，你玩到10240分我就给你flag
>
> 2. 啥，你玩到10240分了？那你也拿不到我这25分。
>
> **题目考点**：玩游戏，JS审计，游戏漏洞挖掘
>
> **命题人**：小菜鸡。
>
> **审核人：**丶诺熙

## 出题思路

首先，感谢小菜鸡同学供题。题目还是很有意思的。小菜鸡同学一开始做了两个flag，一个是alert的，一个是console的。但审题的时候，考虑到学校平均水平较低，可能会产生很多意外。比如对同学们不太友好，导致同学们失去信心。于是将假flag也算作一道题了。

题目是大家常见的一个游戏2048，当成绩到10240分时，就会获得flag。可以考察一下大家对游戏逻辑的了解，以及前端开发的一些知识。



## 解题思路

### 解法一、打游戏

神级玩家，手撸10240分，成功解开第一题。但这种玩家，第二题就很困难了，因为他不会打开调试器去玩的。此时肯定得不到第二个flag

### 解法二、动态调试js

打开Chrome调试工具（F12），可以发现导入了几个js文件。分析这几个js文件，可以得知游戏主逻辑在main2048.js中。

![20190122154814624661201.png](https://img.5am3.com/20190122154814624661201.png)

此时，分析游戏逻辑，可以找到判定游戏成功的函数，如下图。此时该函数内容加密。

![20190122154814642119058.png](https://img.5am3.com/20190122154814642119058.png)

我们可以接在调试工具的console栏中，调用gamewin函数即可、

![20190122154814647816692.png](https://img.5am3.com/20190122154814647816692.png)

点击确定后，console中出现第二个flag。

![image-20190122164140722](/Users/5am3/Library/Application Support/typora-user-images/image-20190122164140722.png)



### 解法三、解密js

按照解法二的方式，我们可以找到gamewin函数。此时可以发现他的代码加密了。

我们提取一下该加密方式的特征点，如下：

- js加密
- 表情（颜文字）

此时百度即可

![20190122154814660959276.png](https://img.5am3.com/20190122154814660959276.png)

可以得知是aaencode加密，然后百度解密工具即可得到源代码。

![20190122154814672655415.png](https://img.5am3.com/20190122154814672655415.png)

